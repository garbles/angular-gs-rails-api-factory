"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="gs.rails-api-factory"),function(a,b){"use strict";b.module("gs.rails-api-factory",["ngResource","gs.apibase","gs.to-snake-case"]).factory("RailsApiFactory",["$resource","$injector","ApiBase","toSnakeCase",function(a,c,d,e){return function(f,g){var h,i,j,k,l=e(f),m=c.get(f),n=c.get(f+"Collection");return g=g||{},h=g.plural?e(g.plural):"y"===l.slice(l.length-1)?l.slice(0,l.length-1)+"ies":l+"s",i=a(d+"/"+h+"/:id",{id:"@id"},{update:{method:"PATCH"}}),k=function(a){var b=a[h];return b?n.mixin(b):m.mixin(a)},j=function(a){var c,d={};return c=b.isFunction(a.serialize)?a.serialize():a,b.isArray(c)?d[h]=c:d[l]=c,d},{get:function(a){return i.get(a).$promise.then(k)},save:function(a){return a.id?i.update({id:a.id},j(a)).$promise:i.save(j(a)).$promise},destroy:function(a){return i.delete({id:a.id}).$promise}}}}])}(window,window.angular);